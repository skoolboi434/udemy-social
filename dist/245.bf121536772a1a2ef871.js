"use strict";(self.webpackChunkcomplex_react_app=self.webpackChunkcomplex_react_app||[]).push([[245],{245:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(294),r=s(983),l=s(625),c=s(257),n=s(847);const o=()=>{const e=(0,a.useContext)(r.Z),[t,s]=(0,l.x)({searchTerm:"",results:[],show:"neither",requestCount:0});(0,a.useEffect)((()=>(document.addEventListener("keyup",o),()=>{document.removeEventListener("keyup",o)})),[]),(0,a.useEffect)((()=>{if(t.searchTerm.trim()){s((e=>{e.show="loading"}));const e=setTimeout((()=>{s((e=>{e.requestCount++}))}),900);return()=>clearTimeout(e)}s((e=>{e.show="neither"}))}),[t.searchTerm]),(0,a.useEffect)((()=>{if(t.requestCount){const e=c.Z.CancelToken.source();return(async()=>{try{const a=await c.Z.post("/search",{searchTerm:t.searchTerm},{cancelToken:e.token});s((e=>{e.results=a.data,e.show="results"}))}catch(e){console.log("There was a problem or the request was canceled.")}})(),()=>e.cancel()}}),[t.requestCount]);const o=t=>{27==t.keyCode&&e({type:"closeSearch"})};return a.createElement(a.Fragment,null,a.createElement("div",{className:"search-overlay-top shadow-sm"},a.createElement("div",{className:"container container--narrow"},a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},a.createElement("i",{className:"fas fa-search"})),a.createElement("input",{onChange:e=>{e.preventDefault();const t=e.target.value;s((e=>{e.searchTerm=t}))},autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),a.createElement("span",{onClick:t=>{t.preventDefault(),e({type:"closeSearch"})},className:"close-live-search"},a.createElement("i",{className:"fas fa-times-circle"})))),a.createElement("div",{className:"search-overlay-bottom"},a.createElement("div",{className:"container container--narrow py-3"},a.createElement("div",{className:"circle-loader "+("loading"==t.show?"circle-loader--visible":"")}),a.createElement("div",{className:"live-search-results "+("results"==t.show?"live-search-results--visible":"")},Boolean(t.results.length)&&a.createElement("div",{className:"list-group shadow-sm"},a.createElement("div",{className:"list-group-item active"},a.createElement("strong",null,"Search Results")," (",t.results.length," ",t.results.length>1?"items":"item"," found)"),t.results.map((t=>a.createElement(n.Z,{key:t._id,post:t,onClick:()=>e({type:"closeSearch"})})))),Boolean(!t.results.length)&&a.createElement("p",{className:"alert alert-danger text-center shadow-sm"},"Sorry no results found.")))))}}}]);