"use strict";(self.webpackChunkcomplex_react_app=self.webpackChunkcomplex_react_app||[]).push([[213],{213:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var l=a(294),s=a(387),n=a(257),r=a(250),o=a(655),c=a(95),m=a(510),u=a(884),i=a(210),d=a(564),p=a(983);const h=()=>{const{id:e}=(0,r.UO)(),[t,a]=(0,l.useState)(!0),[h,E]=(0,l.useState)([]),f=(0,l.useContext)(d.Z),w=(0,l.useContext)(p.Z),y=(0,r.s0)();if((0,l.useEffect)((()=>{const t=n.Z.CancelToken.source();return async function(){try{const l=await n.Z.get(`/post/${e}`,{cancelToken:t.token});E(l.data),a(!1)}catch(e){console.log("There was a problem or the request was canceled.")}}(),()=>{t.cancel()}}),[e]),!t&&!h)return l.createElement(i.Z,null);if(t)return l.createElement(s.Z,{title:"..."},l.createElement(c.Z,null));const g=new Date(h.createdDate),b=`${g.getMonth()+1}/${g.getDate()}/${g.getFullYear()}`;return l.createElement(s.Z,{title:h.title},l.createElement("div",{className:"d-flex justify-content-between"},l.createElement("h2",null,h.title),!!f.loggedIn&&f.user.username==h.author.username&&l.createElement("span",{className:"pt-2"},l.createElement(o.rU,{to:`/post/${e}/edit`,"data-tooltip-content":"Edit","data-tooltip-id":"edit",className:"text-primary mr-2"},l.createElement("i",{className:"fas fa-edit"})),l.createElement(u.u,{id:"edit",className:"custom-tooltip"})," ",l.createElement(o.rU,{onClick:async()=>{if(window.confirm("Are you sure you want to delete this post?"))try{"Success"==(await n.Z.delete(`/post/${e}`,{data:{token:f.user.token}})).data&&(w({type:"flashMessage",value:"Post was successfully deleted."}),y(`/profile/${f.user.username}`))}catch(e){console.log("There was a problem.")}},className:"delete-post-button text-danger","data-tooltip-content":"Delete","data-tooltip-id":"delete"},l.createElement("i",{className:"fas fa-trash"})),l.createElement(u.u,{className:"custom-tooltip",id:"delete"}))),l.createElement("p",{className:"text-muted small mb-4"},l.createElement(o.rU,{to:`/profile/${h.author.username}`},l.createElement("img",{className:"avatar-tiny",src:h.author.avatar})),"Posted by ",l.createElement(o.rU,{to:`/profile/${h.author.username}`},h.author.username)," on ",b),l.createElement("div",{className:"body-content"},l.createElement(m.U,{children:h.body,allowedElements:["p","br","strong","em","h1","h2","h3","h4","h5","h6","ul","ol","li"]})))}}}]);